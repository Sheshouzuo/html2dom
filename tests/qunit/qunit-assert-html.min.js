/*! qunit-assert-html - v0.2.0 - 2013-03-04
* https://github.com/JamesMGreene/qunit-assert-html
* Copyright (c) 2013 James M. Greene; Licensed MIT */
(function(e,t,n){"use strict";var o=function(e){return e?"function"==typeof e.trim?e.trim():e.replace(/^\s+|\s+$/g,""):""},r=function(e){return e?o(e.replace(/\s+/g," ")):""},a=function(e,t){var n,o;if(t)for(n in e)o=e[n],o&&o===t[n]&&delete e[n];return e},i=Object.keys||function(){var e=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};return function(t){var n,o=[];for(n in t)e(t,n)&&o.push(n);return o}}(),u=function(){var e=function(){var e=function(){var e=/^-ms-/,t="ms-",n=/-([\da-z])/gi,o=function(e,t){return(t+"").toUpperCase()};return function(r){return r.replace(e,t).replace(n,o)}}(),t={};return function(n){var o=t[n];return o?o:(o=e(n),t[n]=o,o)}}(),t=function(t,n){return e(t)<e(n)};return function(n){var o,r,a,i={},u=[],d=n.ownerDocument.defaultView?n.ownerDocument.defaultView.getComputedStyle(n,null):n.currentStyle;if(d&&d.length&&d[0]&&d[d[0]]){for(o=d.length;o--;)u.push(d[o]);for(u.sort(t),r=0,o=u.length;o>r;r++)a=u[r],"cssText"!==a&&"string"==typeof d[a]&&d[a]&&(i[e(a)]=d[a])}else{for(a in d)u.push(a);for(u.sort(),r=0,o=u.length;o>r;r++)a=u[r],"cssText"!==a&&"string"==typeof d[a]&&d[a]&&(i[a]=d[a])}return i}}(),d=function(e,t){var n,o,d,s,l,f={NodeType:e.nodeType,NodeName:e.nodeName.toLowerCase(),Attributes:{},ChildNodes:[]};for(n=e.attributes,o=0,d=n.length;d>o;o++)l=n[o].name.toLowerCase(),"class"===l?f.Attributes[l]=r(n[o].value):"style"!==l&&(f.Attributes[l]=n[o].value);for(s=a(u(e),t),s&&i(s).length&&(f.Attributes.style=s),n=e.childNodes,o=0,d=n.length;d>o;o++)f.ChildNodes.push(c(n[o],t));return f},c=function(e,t){var n;switch(e.nodeType){case 1:n=d(e,t);break;case 3:n={NodeType:e.nodeType,NodeName:e.nodeName.toLowerCase(),NodeValue:e.nodeValue};break;case 4:case 7:case 8:n={NodeType:e.nodeType,NodeName:e.nodeName.toLowerCase(),NodeValue:o(e.nodeValue)};break;case 5:case 6:case 9:case 10:case 11:case 12:n={NodeType:e.nodeType,NodeName:e.nodeName};break;case 2:throw Error("`node.nodeType` was `Node.ATTRIBUTE_NODE` (2), which is not supported by this method");default:throw Error("`node.nodeType` was not recognized: "+e.nodeType)}return n},s=function(e){var t,n,r,a=l(),i=a.container(),d=u(i),s=[];for(i.innerHTML=o(e),t=i.childNodes,n=0,r=t.length;r>n;n++)s.push(c(t[n],d));return a.reset(),s},l=function(){var o,r,a,i,u="qunit-html-addon-container",d=!1,c=function(){d=!0},s=function(){("complete"===r.readyState||4===r.readyState)&&(d=!0)};if(!o){e.begin(function(){if(!r||!a||!i){r=t.document.createElement("iframe"),e.addEvent(r,"load",c),e.addEvent(r,"readystatechange",s),r.style.position="absolute",r.style.top=r.style.left="-1000px",r.height=r.width=0,t.document.body.appendChild(r),a=r.contentWindow||r.window||r.contentDocument&&r.contentDocument.defaultView||r.document&&(r.document.defaultView||r.document.window)||t.frames[r.name||r.id],i=a&&a.document||r.contentDocument||r.document;var n=["<!DOCTYPE html>","<html>","<head>","	<title>QUnit HTML addon iframe</title>","</head>","<body>",'	<div id="'+u+'"></div>','	<script type="text/javascript">',"		window.isReady = true;","	</script>","</body>","</html>"].join("\n");i.open(),i.write(n),i.close(),d=d||a.isReady}}),e.done(function(){r&&r.ownerDocument&&r.parentNode.removeChild(r),r=a=i=null,d=!1});var l=function(e){if(!d){e||(e=2e3);for(var t=new Date;!d&&e>new Date-t;)d=d||a.isReady}};o={container:function(){return l(),d&&i?i.getElementById(u):n},reset:function(){var e=o.container();e&&(e.innerHTML="")}}}return function(){return o}}();e.extend(e.assert,{htmlEqual:function(e,t,n){n||(n="HTML should be equal"),this.deepEqual(s(e),s(t),n)},notHtmlEqual:function(e,t,n){n||(n="HTML should not be equal"),this.notDeepEqual(s(e),s(t),n)},_serializeHtml:s})})(QUnit,this);